# 高并发/性能提升问题综述

用一个由上至下的思路来看：

### 应用层面

- 内存共享导致的性能问题，竞态问题，无锁化，通道，CoW，减少可变量
- 内存浪费导致的性能问题
- 不必要的 IO 等待导致的性能问题
    - 延迟处理或批处理，将多条消息打包在一起发送，这样可以减少网络请求的数量，提高网络利用率
    - 使用缓存减少不必要的网络 IO、磁盘 IO，有意识地尽量都在内存里操作，必要时才与数据库做交互，又比如 kube-scheduler 调度器缓存，乐观绑定，持久化可以考虑做成异步

### 数据库层面

数据库连接优化，SQL 优化，减少数据库锁的使用。

### 操作系统层面

- CPU 调度方面，减少上下文切换，GMP 模型，ebpf
- 内存管理方面，实际的内存操作——包括分配、释放和合并内存——是比较昂贵的。Go 的栈空间管理中热分裂问题的解决方案，或者垃圾回收，都是只标记

### 硬件层面

- 充分利用硬件的特性，Kafka
- 合理的资源分配，减少资源闲置
    - 重要服务设置高级别 QoS
    - 负载均衡提高资源利用率，如 Nginx 将进入的网络流量分配到多个后端服务器上，确保每个服务器的负载都保持在可管理的水平，从而提高了整个系统的性能和可靠性。这有助于减少资源闲置，因为所有的服务器都在接收和处理请求