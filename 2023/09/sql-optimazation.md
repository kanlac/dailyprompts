# SQL 优化技巧

## MySQL 中 VARCHAR 的长度是否有上限？

MySQL 5 之前，varchar 长度的最大限制是 255 个字符，5 之后的版本就只有行的字符长度限制了，一行最大 65535 个字节（注意是字符限制到字节限制）。

## 指定 CHAR 和 VARCHAR 的大小分别有什么用？

对于 CHAR 类型的列，指定的长度跟存储有关：长度不足会填充空格至指定长度。

指定 VARCHAR 大小则主要是出于数据完整性考虑，确保数据符合预期的长度。

PostgreSQL 会根据实际存储的数据动态分配空间，如果一个 `VARCHAR(100)` 字段只存储了 10 个字符的字符串，那么它实际上只会使用 10 个字符加上一个小的额外开销（用于长度和其他元信息）的空间。

要注意，插入数据的字符数大于 VARCHAR 长度时，数据库可能会截取数据造成数据丢失，但不会报错。

## 指定数字类型的长度有什么用？

对于数字类型的列（字段），指定的长度跟存储无关：INT(x) 永远是 4 个字节，只是可以配合 ZEROFILL 决定显示效果（补全 0）。
