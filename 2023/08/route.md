# 查看路由表有哪几种方式？有什么区别？

1. `netstat -rn`
2. `route`
3. `ip -r` 

    
下面是对 `netstat -rn`、`route` 和 `ip route` 命令之间差异的说明：

- **netstat -rn**：`netstat` 是一个用于网络统计的强大工具，可以显示网络连接、路由表、接口统计、多播成员等信息。`r` 参数让它显示路由表，而 `n` 参数让它以数字形式显示地址，不进行 DNS 名称解析。这个命令提供了详细的网络连接和路由信息，但是在许多现代 Linux 发行版中，已经被 `ss` 和 `ip` 命令所取代。
- **route**：`route` 命令主要用于显示和操作 IP 路由表。虽然它能够提供类似的信息，但相比 `netstat -rn`，它的功能更为局限，主要专注于路由表的查看和操作。这个命令在许多现代 Linux 发行版中，已经被 `ip` 命令所取代。
- **ip route**：`ip route` 是现代 Linux 发行版中推荐使用的命令，用于显示和操作路由表。它是 `ip` 命令的一个子命令，`ip` 命令被设计用来替代老旧的网络配置命令如 `ifconfig` 和 `route`。`ip route` 提供了一个统一的接口来管理路由，同时也支持更多的现代网络功能。

总结：虽然这三个命令都可以用来显示路由表，但它们是不同网络工具的一部分，提供了不同级别的信息和功能。其中，`netstat -rn` 和 `route` 都是老旧的工具，已经在许多现代 Linux 发行版中被 `ip route` 命令所取代。`ip route` 提供了更统一、更强大的路由管理功能，是当前推荐使用的工具。

- 创建一个 docker 网络时，它的路由是如何确定的？

Docker 使用其内部的 IPAM (IP Address Management) 驱动来自动分配 IP 地址和管理路由。默认情况下，Docker 使用内置的 IPAM 驱动，但你也可以选择使用第三方的 IPAM 驱动。

以下是 Docker 创建网络时路由的确定过程：

1. **选择网络段**：当你创建一个新的 Docker 网络时，可以指定一个子网来为该网络分配 IP 地址。如果你没有指定，Docker 会默认选择一个未被使用的私有地址段（通常在 172.17.0.0/16 到 172.31.0.0/16 或 192.168.0.0/20 中选择）。
    
    创建网络的命令如下：
    
    ```bash
    docker network create --subnet=<subnet> <network_name>
    
    ```
    
    例如，你可以创建一个名为 "my_network" 的网络，其子网为 "192.168.1.0/24"：
    
    ```bash
    docker network create --subnet=192.168.1.0/24 my_network
    
    ```
    
2. **创建路由表**：当 Docker 创建一个新的网络时，它会自动在该网络的每个容器内创建一个路由表。这个路由表有一个默认路由，指向 Docker 容器的网关。Docker 容器的网关通常是子网的第一个 IP 地址。例如，如果子网是 "192.168.1.0/24"，那么 Docker 容器的网关就可能是 "192.168.1.1"。
    
    你可以使用 `docker inspect <container_id>` 命令查看一个容器的网络信息，包括其 IP 地址、网关和路由表。
    

以上就是 Docker 创建网络时路由的确定过程。所有这些都是自动完成的，但如果你想要，也可以在创建网络时自定义一些设置，例如子网、网关和 IP 范围等。