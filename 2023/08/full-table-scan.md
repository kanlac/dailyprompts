# 全表扫描 Full Table Scan

全表扫描通常发生在以下几种情况：

1. 表没有索引，或者索引不适用于查询条件。
2. 不适用的索引，比如查询条件进行了算数操作
3. 查询条件很模糊，导致使用索引效率不高。
4. 数据表非常小，全表扫描比使用索引更快。
5. 数据库优化器决定全表扫描比使用索引更高效（例如，进行大量数据的批处理操作）。

## SQL 示例

1. 无索引表的全表扫描

    ```sql
    SELECT * FROM users WHERE age = 30;

    ```

    如果表 `users` 没有针对 `age` 列的索引，则会进行全表扫描。

2. 不适用的索引

    ```sql
    SELECT * FROM users WHERE age + 5 = 30;
    
    ```

    如果存在一个针对 `age` 的索引，由于查询条件进行了算数操作，索引可能无法使用。

3. 模糊查询

    ```sql
    SELECT * FROM users WHERE name LIKE '%Smith%';
    
    ```

    这样的查询条件会使得即使存在索引也不一定会使用。

### 全表扫描会用到锁吗

两者没有直接关系。是否会用到锁取决于多个因素，包括事物隔离级别，是否涉及表修改，以及数据库管理系统（DBMS）中查询优化器的具体实现。
