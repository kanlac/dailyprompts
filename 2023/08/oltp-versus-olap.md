# OLTP v.s. OLAP

## Q

- 简述两者之间的区别？分别适用什么场景？
- 流行的 OLAP 有什么？

## A

一句话概述：在线事务处理（OLTP）系统处理事务，适用于面向行的数据库；在线分析处理（OLAP）系统分析由 OLTP 系统生成的大量数据，适用于面向列的数据库。

OLTP 与 OLAP 的区别，基本上就是数据库和数据仓库（data warehouse）的区别。数据仓库的主要应用是 OLAP。

### 介绍

在线事务处理（OLTP, Online Transaction Processing）系统实时地处理、存储事务中的数据。OLTP 系统聚焦于频繁的读、写和更新。

通常一个事务对应一行数据，比如银行系统处理，适用于面向行的存储结构

在线分析处理（OLAP, Online Analytical Processing）系统则是使用复杂的请求分析 OLTP 系统中聚合的大量历史数据，通常用于数据挖掘、分析等项目。OLAP 聚焦于对复杂查询的响应时间。

分析聚合数据的过程中，会需要从大量的行中读取个别的列，因此适用于面向列的存储系统。

### OLAP 场景

基本每家电商公司都会经历，从只需要业务数据库到要数据仓库的阶段。传统的数据库是业务性的，而数据仓库是分析性的，主要用于数据挖掘和数据分析，辅助领导做决策。主要是做读优化。

- 很少对单个行的操作
- 表很宽，也就是说可能有很多列
- 大部分请求是读操作，经常要读取很多条数据，同时只需要个别几个列
- ……

流行的 OLAP 数据库包括 ClickHouse, Snowflake 等等。

Notion 使用的是 Snowflake 的数据仓库。Snowflake 是美国蒙大拿州的一家做数据仓库的上市公司。他们是做云计算的，但并不提供硬件，他们也要用 Amazon S3 或者 Microsoft Azure。