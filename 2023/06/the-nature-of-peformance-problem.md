# 性能问题的本质

1. 微观视角：开发时做好内存管理——refer [如何做好 Go 的内存管理？](how-to-manage-memory-usage-in-go.md)之性能篇
2. 宏观视角：减少计算机硬件资源的闲置率
    - 提高同类资源的利用率
        - 负载均衡
            - 负载均衡器（如 Nginx）将进入的网络流量分配到多个后端服务器上，确保每个服务器的负载都保持在可管理的水平，从而提高了整个系统的性能和可靠性。这有助于减少资源闲置，因为所有的服务器都在接收和处理请求
            - 如果有多个 CPU 或 CPU 核心，可以使用负载均衡策略（例如，使用 Linux 的 taskset 工具）将任务分布到所有可用的 CPU 或核心上，以最大程度地利用 CPU 资源
    - 减少不同类资源之间的等待
        - 混合策略：读写速度相对较快的硬件（例如内存或 SSD）用于存储经常访问的数据，相对较慢的硬件（例如硬盘或 HDD）用于存储不经常访问的数据
            - 利用内存缓存（如 Memcached 或 Redis）可以显著提高数据访问的速度，因为内存访问的速度比硬盘快很多。这种策略可以减少 CPU 等待数据从硬盘加载的时间，从而减少 CPU 的闲置
        - 预读取和延迟写入：操作系统通常会使用预读取和延迟写入的策略来优化硬盘的使用。预读取是指系统预测用户可能需要的数据，并提前将其从硬盘读取到内存中。延迟写入是指系统将数据暂时存储在内存中，然后在合适的时候再写入到硬盘中。这两种策略都可以减少 CPU 等待硬盘操作的时间，从而减少 CPU 的闲置
            - 批处理：将多条消息打包在一起进行发送，这样可以减少网络请求的数量，提高网络利用率（Kafka）