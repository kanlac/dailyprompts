# 数据库横向比较

## 非关系型数据库（NoSQL）有哪些类别？它们的共同特点？

分为四类：键值存储，图存储，列存储，文档存储。通常都不支持关联（join）操作。

- SQL 数据库可以设置数据之间的关联，表与表之间有一对一多对多等关系，但 NoSQL 数据库没有
    
    NoSQL 数据库的主要设计原则之一就是去除关系模型，优化大规模数据集的读写性能。因此，它们通常不支持类似于 SQL 数据库中的外键关系。然而，你仍然可以在应用程序代码中实现不同类型数据之间的关联关系。
    
    某些类型的 NoSQL 数据库，比如文档型数据库（如 MongoDB）和图形数据库（如 Neo4j），可以更直观地处理数据之间的关联关系。在文档型数据库中，你可以在一个文档内嵌套其他文档，以此方式建立关联关系。在图形数据库中，数据项（节点）之间的关联（边）是其核心组成部分，可以非常直观地表示和查询数据关系。
    
    但请注意，虽然可以实现关联关系，但在 NoSQL 数据库中管理这些关系通常需要更多的应用程序逻辑，并且可能无法提供像 SQL 数据库那样的原子性、一致性、隔离性和持久性（ACID）保证。所以在选择数据库类型时，需要根据应用的具体需求进行权衡。
    
    话说，Neo4j 这种图数据库也属于 NoSQL 的范畴哦，它很擅长处理数据之间的关系。
    

## 如何选择数据库？何时选择非关系型数据库？

通常来说选择关系型就足够，它们已经经过 40 年的历史检验，很可靠，适用于一般场景。但如果是以下特殊场景，则可能考虑使用非关系型数据库：

1. 对低延迟有极高要求，比如游戏
2. 数据是无结构的，或者不需要关系型数据，比如日志
3. 你只需要序列化或解序列化数据，比如 JSON, XML, YAML 等等
4. 需要存储大量数据

## MySQL 与 PostgreSQL 的比较
- 流行度：MySQL 使用广泛，可能有比较多的解决方案或学习资源
- 数据复制：MySQL 提供较简单的主从复制，可以将读取负载分散到多个服务器上；PostgreSQL 提供更为复杂的同步复制，可以做到更强的一致性
- 复杂查询：PostgreSQL 对 SQL 标准遵守更严格，因而能够使用更多高阶 SQL 特性，对复杂查询的支持更好
- 强一致性的并发写入支持：PostgreSQL提供更好的性能，因为它使用了如多版本并发控制（MVCC）这样的技术来提高并发处理的性能

总结：如果需要简单易用，并且对于复杂的查询和事务处理要求不高，特别是在Web开发和**读取密集**型应用中，那么MySQL可能会是更好的选择。如果有更高阶的要求，使用 PostgreSQL。

## 请列举几个案例，说明为什么他们适合 MySQL，PostgreSQL 或者 SQLite
**案例一：在线购物网站**

假设你正在建设一个大型的在线购物网站，需要处理大量并发的读取请求，例如用户浏览商品、查询价格和库存等。同时，这个网站需要支持分布式的数据复制以提高读取性能和数据备份。在这种情况下，MySQL可能是一个更好的选择，因为MySQL在处理大量并发读取请求和数据复制方面表现出色。

**案例二：科研数据分析**

假设你在一家科研机构工作，需要处理和分析大量的复杂数据集。这些数据分析可能包括复杂的查询和联接，需要对数据完整性有严格的要求。在这种情况下，PostgreSQL可能是一个更好的选择，因为PostgreSQL对复杂查询的处理效率更高，同时支持完整的ACID特性，可以保证数据的完整性。

**案例三：财务管理系统**

假设我们有一个财务管理系统，用户可以创建和管理各种财务事务，系统需要保证数据的一致性和准确性。这个系统的需求可能包括：

- 复杂查询：系统可能需要进行复杂的财务报表查询。
- 高级事务处理：系统需要保证数据的一致性和准确性。
- 自定义数据类型：系统可能需要使用到特殊的数据类型，比如货币类型。

在这种情况下，PostgreSQL可能是一个好的选择。PostgreSQL在处理复杂查询时表现优秀，完全支持ACID事务，可以有效地保证数据的一致性和准确性。此外，PostgreSQL支持创建自定义数据类型，这对于实现特殊的数据类型非常有帮助。

**案例四：桌面应用程序**

假设你正在开发一个桌面应用程序，这个应用程序需要存储和查询用户的个人数据，例如用户的偏好设置、任务列表等。这个应用程序只在用户的个人计算机上运行，不需要网络访问或多用户并发访问。在这种情况下，SQLite可能是一个更好的选择，因为SQLite是一个轻量级的数据库，不需要单独的数据库服务器，可以直接将数据库文件存储在用户的计算机上，适合在单用户环境中使用。

**案例五：社交媒体平台**

假设我们有一个社交媒体平台，用户可以发布帖子，评论，点赞，分享和发送私人消息。这个平台的需求可能包括：

- 高度可扩展性：随着用户量的增长，平台需要容易地进行水平扩展。
- 灵活的数据模型：社交媒体的数据模型可能会频繁变化，因此需要一个可以灵活应对的数据库。
- 对非结构化数据的处理：用户生成的内容可能包括各种类型的数据，如文本，图片，视频等。

在这种情况下，MongoDB可能是一个很好的选择。MongoDB提供了出色的水平扩展性，并且其基于文档的数据模型可以轻松应对频繁的数据模型变化。此外，MongoDB对非结构化数据的处理也非常优秀。

**案例六：实时分析系统**

假设我们有一个实时分析系统，需要快速处理和分析大量的数据，然后生成报告和警报。这个系统的需求可能包括：

- 大数据处理：系统需要快速读写大量数据。
- 高效率的查询：系统需要在短时间内进行复杂的数据分析和查询。
- 对非结构化和半结构化数据的处理：系统可能需要处理各种类型的数据，如日志文件，传感器数据等。

在这种情况下，MongoDB可能是一个好的选择。MongoDB在处理大数据方面表现出色，其索引功能和查询语言也可以支持复杂的数据查询。此外，MongoDB的数据模型可以很好地处理非结构化和半结构化的数据。