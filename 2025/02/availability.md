# 可用性

## 定义

在分布式系统中，保证当部分服务器离线、速度变慢或出现意外网络错误时，系统仍然可用。

## 如何实现

1. 读路径优化——读缓存，提高命中率；读副本（replication），提高处理能力
2. 写路径优化——限制可写节点数量，一主多备是常见的方案，避免数据冲突，考虑异步同步副本
3. 如何做数据分区（data partition）——分区可以均匀分布负载，避免热点。例如将数据按 id 分到 3 个节点，每个节点处理 1/3 的请求。一是要考虑如何让数据均匀分布，避免数据倾斜，二是在节点增删时减少数据移动。具体做法可以是：使用哈希环，并使负载量大的机器有更多的虚拟节点。还有个好处是可以以分区为粒度做管理，比如只对热数据分区做副本
4. 如何处理数据冲突——例如使用 vector clock 处理一部分冲突
5. 如何做故障转移——Patroni for PostgreSQL；Kubernetes Operator
